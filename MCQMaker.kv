#:kivy 2.1.0
WindowManager:
    MenuWindow:
        name: "menu"
    QCMWindow:
        name: "qcm"
    ImportWindow:
        name: "import"
    DatabaseWindow:
        name: "database"
    ClassesWindow:
        name: "classes"
    SettingsWindow:
        name: "settings"


#######################
### Generic classes ###
#######################

<LoadDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserIconView:
            id: filechooser
            path: root.default_path
            filters: root.filters_list

        BoxLayout:
            size_hint_y: 0.1
            Button:
                text: root.cancel_label
                on_release: root.cancel()

            Button:
                text: root.load_label
                on_release: root.load(filechooser.path, filechooser.selection)


<TabsLayout>:
    Button:
        text: root.tabs_values["qcm"]
        background_color: root.parent.manager.button_pink_color if root.parent.manager.current == "qcm" else root.parent.manager.button_blue_color
        on_release:
            if root.parent.manager.current != "qcm": \
            root.parent.manager.current = "qcm"; \
            root.parent.manager.initialise_screen();
            else: \
            root.parent.manager.current = "menu";
    Button:
        text: root.tabs_values["import"]
        background_color: root.parent.manager.button_pink_color if root.parent.manager.current == "import" else root.parent.manager.button_blue_color
        on_release:
            if root.parent.manager.current != "import": \
            root.parent.manager.current = "import"; \
            root.parent.manager.initialise_screen();
            else: \
            root.parent.manager.current = "menu";
    Button:
        text: root.tabs_values["database"]
        background_color: root.parent.manager.button_pink_color if root.parent.manager.current == "database" else root.parent.manager.button_blue_color
        on_release:
            if root.parent.manager.current != "database": \
            root.parent.manager.current = "database"; \
            root.parent.manager.initialise_screen();
            else: \
            root.parent.manager.current = "menu";
    Button:
        text: root.tabs_values["classes"]
        background_color: root.parent.manager.button_pink_color if root.parent.manager.current == "classes" else root.parent.manager.button_blue_color
        on_release:
            if root.parent.manager.current != "classes": \
            root.parent.manager.current = "classes"; \
            root.parent.manager.initialise_screen();
            else: \
            root.parent.manager.current = "menu";
